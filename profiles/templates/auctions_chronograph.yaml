main:
  tenders_api_server: {{tenders_api_server}}
  tenders_api_version: "{{tenders_api_version}}"
  tenders_api_token: {{tenders_api_token}}
  couch_url: {{couch_url}}
  auctions_db: {{auctions_db}}
  timezone: {{timezone}}
  auction_worker: {{auction_worker}}
  auction_worker_config: {{auction_worker_config}}
  {% for key, value in parts.get('auction_worker_configs', {}).items() %}
  {{ key }}: {{ value }}
  {% endfor %}
  limit_auctions: {{limit_auctions|default(500)}}
  limit_free_memory: {{limit_free_memory|default(0.15)}}
  web_app: {{web_app|default('')}}
  use_consul: {{ use_consul }}

version: 1

formatters:
  simple:
    format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

handlers:
  console:
    class: logging.StreamHandler
    level: ERROR
    formatter: simple
    stream: ext://sys.stdout
{% if 'statsd' in parts['auctions_chronograph.yaml'] %}
  statsd:
    level: DEBUG
    class: statsdhandler.StatsdHandler
    config_path: "{{handler_config}}"
{% endif %}
  journal:
    class: ExtendedJournalHandler.ExtendedJournalHandler
    level: INFO
    SYSLOG_IDENTIFIER: AUCTIONS_CHRONOGRAPH
    TENDERS_API_VERSION: "{{tenders_api_version}}"
    TENDERS_API_URL: {{tenders_api_server}}

loggers:
  Auction Chronograph:
    handlers: [console, journal{% if 'statsd' in parts['auctions_chronograph.yaml'] %},statsd {% endif %}]
    propagate: no
    level: DEBUG

  apscheduler.scheduler:
    handlers: [console, journal{% if 'statsd' in parts['auctions_chronograph.yaml'] %},statsd {% endif %}]
    propagate: no
    level: DEBUG

  openprocurement.auction.sync:
    handlers: [console, journal{% if 'statsd' in parts['auctions_chronograph.yaml'] %},statsd {% endif %}]
    propagate: no
    level: DEBUG

  apscheduler.executors.default:
    handlers: [console, journal{% if 'statsd' in parts['auctions_chronograph.yaml'] %},statsd {% endif %}]
    propagate: no
    level: DEBUG

  "":
    handlers: [console, journal]
    level: DEBUG
